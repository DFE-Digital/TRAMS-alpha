{% extends "./layouts/trust.html" %}
{% from "./includes/contact.html" import contact %}
{% from "./includes/link.njk" import link %}
{% set current_page = "trust-details" %} 

{% block pageContent %}
  <div class="dfe-card  dfe-card--two-columns">
    <dl class="dfe-card__content">
      <div class="dfe-card__column">
        <dt class="govuk-heading-s govuk-!-margin-bottom-1">Trust relationship manager:</dt>
        {{ contact(data.trust.trustDetails.trustRelationshipManager) }}
        <dt class="govuk-heading-s govuk-!-margin-bottom-1">SFSO Lead:</dt>
        {{ contact(data.trust.trustDetails.sfsoLead) }}
      </div>
      <div class="dfe-card__column">
        <dt class="govuk-heading-s govuk-!-margin-bottom-1 govuk-!-padding-top-1">Main contact at trust:</dt>
        {{ contact(data.trust.trustDetails.mainContactAtTrust, true) }}
      </div>
    </dl>
  </div>
  <section class="govuk-!-margin-top-8 govuk-!-margin-bottom-8">
    <h2>Trust details</h2>

    {{ govukSummaryList({
        rows: [
          {
            key: {
              text: "Address:"
            },
            value: {
              text: data.trust.trustDetails.address | default('---', true)
            }
          },
          {
            key: {
              text: "Website:"
            },
            value: {
              html: link(data.trust.trustDetails.website, opensInNewTab=true)
            }
          },
          {
            key: {
              text: "Local authorites:"
            },
            value: {
              text: data.trust.trustDetails.localAuthorities | join(', ') | default('---', true)
            }
          },
          {
            key: {
              text: "Regions Group:"
            },
            value: {
              text: data.trust.trustDetails.regionsGroup | default('---', true)
            }
          },
          {
            key: {
              text: "National sponsor oversight:"
            },
            value: {
              html: "---"
            }
          },
          {
            key: {
              text: "Schools financial support territory (SFSO):"
            },
            value: {
              html: data.trust.trustDetails.schoolsFinancialSupportTerritory | default('---', true)
            }
          },
          {
            key: {
              text: "Date incorporated:"
            },
            value: {
              html: data.trust.trustDetails.dateIncorporatedString | default('---', true)
            }
          },
          {
            key: {
              text: "Date opened:"
            },
            value: {
              html: data.trust.trustDetails.dateOpenedString | default('---', true)
            }
          },
          {
            key: {
              text: "Trust reference number:"
            },
            value: {
              html: data.trust.trustDetails.trustReferenceNumber | default('---', true)
            }
          },
          {
            key: {
              text: "Companies House number:"
            },
            value: {
              html: data.trust.trustDetails.companiesHouseNumber | default('---', true)
            }
          },
          {
            key: {
              text: "Companies House filing history:"
            },
            value: {
              html: link(
                data.trust.trustDetails.companiesHouseFilingHistoryUrl, 
                linkText=data.trust.trustDetails.companiesHouseFilingHistoryUrl, 
                opensInNewTab=true
              )
            }
          },
          {
            key: {
              text: "Get information about schools:"
            },
            value: {
              html: '<a class="govuk-link" href="#">View data held on Get information about schools (opens in a new tab)</a>'
            }
          }
        ]
      }) }}

    {{ govukDetails({
        summaryHtml: '<span>Data source</span> <span>(last updated 21 December 2021)</span>',
        html: '
          <dl class="dfe-data-source-list">
            <div class="dfe-data-source-list__item">
              <dt class="dfe-data-source-list__title">Data source:</dt>
              <dd>Get information about schools</dd>
            </div>
            <div class="dfe-data-source-list__item">
              <dt class="dfe-data-source-list__title">Last updated:</dt>
              <dd>21 December 2021</dd>
            </div>
            <div class="dfe-data-source-list__item">
              <dt class="dfe-data-source-list__title">Next scheduled update:</dt>
              <dd>21 January 2022</dd>
            </div>
          </dl>
        '
      }) }}
  </section>
  <section class="govuk-!-margin-top-8 govuk-!-margin-bottom-8">
    <h2>Sponsor details</h2>

    {{ govukSummaryList({
        rows: [
          {
            key: {
              text: "Sponsor status:"
            },
            value: {
              text: data.trust.trustDetails.sponsorStatus | default('---', true)
            }
          },
          {
            key: {
              text: "Sponsor restrictions:"
            },
            value: {
              text: data.trust.trustDetails.sponsorRestrictions | default('---', true)
            }
          },
          {
            key: {
              text: "Sponsor approval date:"
            },
            value: {
              html: data.trust.trustDetails.sponsorApprovalDateString | default('---', true)
            }
          },
          {
            key: {
              text: "Sponsor name:"
            },
            value: {
              html: data.trust.trustDetails.sponsorName | default('---', true)
            }
          }
        ]
      }) }}
  </section>

{% endblock %}
